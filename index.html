<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>buildr for jQuery: when code is your template</title>
    
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
		<link rel="stylesheet" href="stylesheets/zenburn.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 style='line-height: .5em;'>buildr<br/><small>jQuery plugin</small></h1>
        <p>When code is your template</p>
        <p class="view"><a href="http://github.com/mlanza/buildr">View the Project on GitHub <small>mlanza/buildr</small></a></p>
        <ul>
          <li><a href="https://github.com/mlanza/buildr/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/mlanza/buildr/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="http://github.com/mlanza/buildr">Fork On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>

<h1>Remember Markaby?</h1>
<p>It showed us a lovely way in which code could be used to express markup.  This appeals to those who favor code over templates.  Where templates can sometimes interfere with our ability to get things done, code affords unlimited expressive freedom .</p>
<p>Let's create a list using standard jQuery:
<pre class='javascript'><code>$div.
  append($('&lt;h1&gt;').text('The Three Stooges')).
	append($('&lt;ol&gt;', {id: 'stooges', class: 'comedians'}).
	  append(function(){
		  return $.map(stooges, function(stooge, idx){
			  return $('&lt;li&gt;').text(stooge.name()).get();
		  });
	  })
	);
</code></pre>
Nothing wrong that.  This approach simply accentuates the declaring-and-appending-elements tasks.  It's verb-centric.
</p>
<p>Now let's use buildr's <a href='http://en.wikipedia.org/wiki/Markaby'>Markaby</a>-like syntax:
<pre class='javascript'><code>//inline iteration
$div.build(function(b){
	b.h1('The Three Stooges');
	b.ol({id: 'stooges', class: 'comedians'}, 
		stooges, function(idx, stooge){
			b.li(stooge.name());
		}
	);
});

//explicit iteration using $.each
$div.build(function(b){
	b.h1('The Three Stooges');
	b.ol({id: 'stooges', class: 'comedians'}, function(){
		$.each(stooges, function(idx, stooge){
			b.li(stooge.name());
		});
	});
});
</code></pre>
Here we minimize the verbs and accentuate the markup.  It's more declarative in that it's noun-centric.
</p>
<p>Is that better?  To some.  It's a matter of style.  Does it appeal to your personal sense of aesthetics?  It does appeal to the inner Markaby fan in me.  On the plus side, it is less verbose.</p>
<h2>What else can we do?</h2>
<p>Here are some slight variations on the same list.
<pre class='javascript'><code>//nest elements inside a function
$div.build(function(b){
	b.h1('The Three Stooges');
	b.ol({id: 'stooges', class: 'comedians'}, function(){
	  b.li("Moe Howard");
		b.li("Larry Fine"); 
		b.li("Curly Howard");
	});
});

//nest elements inline
$div.build(function(b){
	b.h1('The Three Stooges');
	b.ol({id: 'stooges', class: 'comedians'}, 
	  b.li("Moe Howard"), 
		b.li("Larry Fine"), 
		b.li("Curly Howard")
	);
});

//use "perilous" with statement to omit buildr object
$div.build(function(b){ with(b){
	h1('The Three Stooges');
	ol({id: 'stooges', class: 'comedians'}, 
	  li("Moe Howard"), 
		li("Larry Fine"), 
		li("Curly Howard")
	);
}});
</code></pre>
</p>

<p>Each builder method (tag) returns a jQuery element extended by buildr.  (See below: <code>tr</code> still exposes the native jQuery <code>click</code> method.)  Since we're essentially dealing with one big ball of jQuery objects, you probably already know how to manipulate it.  All we've added are a few methods and some tags by which we express markup.
<pre class='javascript'><code>var highlight = function(){...}; //define callback
$div.build(function(b){
	b.table(function(){
		b.caption(b.b('The Three Stooges'));
		b.each(stooges, function(idx, stooge){  //iterate
			b.tr(
			  b.td(stooge.fname), 
				b.td(stooge.lname), 
				b.td(stooge.dob)
		  ).click(highlight);
		});
	});
});
</code></pre>
</p>
<p>There are dozens of expressive variations.  See the <a href='tests/spec/BuildrSpec.js'>unit tests</a> to explore the possibilities.</p>
<p>Thanks, <a href='http://en.wikipedia.org/wiki/Why_the_lucky_stiff'>Why</a>, for showing us another way.</p>
<p id='stooges'>And no example is complete without its funny guys.  Here's the data we've been using.
<pre class='javascript'><code>var Person = function(fname, lname, options){
	this.fname = fname;
	this.lname = lname;
	this.name = function(){
		return this.fname + ' ' + this.lname;
	}.bind(this);
	$.extend(this, options);
}

var stooges = [
	new Person('Moe'    , 'Howard'  , {dob: new Date('1897-06-19')}),
	new Person('Larry'  , 'Fine'    , {dob: new Date('1902-10-05')}),
	new Person('Curly'  , 'Howard'  , {dob: new Date('1903-10-22')})
];

var $div = ('&lt;div>');
</code></pre>
</p>

      </section>
      <footer>
        <p>This project is maintained by <a href="http://github.com/mlanza">Mario T. Lanza</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/highlight.js"></script>
		<script src="javascripts/javascript.js"></script>
		<script src="javascripts/ruby.js"></script>
		<script src="javascripts/xml.js"></script>
    <script src="javascripts/scale.fix.js"></script>
  <script>
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  </script>		
  </body>
</html>